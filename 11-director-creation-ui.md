# Director Creation UI - Implementation Plan

## Overview

Expand the Director (DM) UI to include world-building capabilities:
- Create/edit entities (Locations, Characters, Items, Maps)
- Request LLM suggestions for content generation
- Generate graphics via ComfyUI workflows
- Dual input modes: manual entry + AI-assisted generation

---

## Current State

The existing DM View (`Player/src/presentation/views/dm_view.rs`) is focused on **directing gameplay**:
- Scene preview, conversation log, approval popups
- NPC motivations, tone controls, active NPCs panel

This plan adds **world-building/creation** capabilities.

---

## Design Decision 1: UI Structure

### Option A: Tabbed DM View (Recommended)
Add tabs to switch between Director and Creator modes within the same view.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Director Mode]  [Creator Mode]                               [â† Back] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  (Content changes based on selected tab)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pros**: Unified experience, easy to switch context
**Cons**: More complex single view

### Option B: Separate Creator View
Add a dedicated "Creator" view accessible from main menu alongside DM View.

```
Main Menu:
  [PC View]    - Play as a character
  [DM View]    - Direct gameplay
  [Creator]    - Build worlds (NEW)
```

**Pros**: Clean separation of concerns
**Cons**: Requires navigation between views during session

### Option C: Sidebar Panel in DM View
Add collapsible creator panel alongside existing directing controls.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scene Preview            â”‚  Directorial  â”‚  [â‰¡] Creator Panel  â”‚
â”‚  Conversation Log         â”‚  Controls     â”‚  + New Character    â”‚
â”‚                           â”‚               â”‚  + New Location     â”‚
â”‚                           â”‚               â”‚  + Generate...      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pros**: Always accessible while directing
**Cons**: Cramped space, competing for attention

---

## Design Decision 2: Entity Creation Flow

### Option A: Form-Based Creation (Recommended)
Standard forms with fields, dropdowns, and textareas. LLM suggestions appear as "auto-fill" buttons.

```
â”Œâ”€ Create Character â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  Name: [________________] [ğŸª„ Suggest]                    â”‚
â”‚                                                           â”‚
â”‚  Description:                                             â”‚
â”‚  [                                        ] [ğŸª„ Suggest]  â”‚
â”‚  [                                        ]               â”‚
â”‚                                                           â”‚
â”‚  Archetype: [Hero â–¼]  [ğŸª„ Suggest based on description]  â”‚
â”‚                                                           â”‚
â”‚  Wants/Goals:                                             â”‚
â”‚  [+ Add Want]  [ğŸª„ Generate wants from archetype]        â”‚
â”‚                                                           â”‚
â”‚  [Generate Portrait]  [Generate Sprite]                   â”‚
â”‚                                                           â”‚
â”‚  [Cancel]                              [Save Character]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option B: Chat-Based Assistant
Conversational interface where DM describes what they want and AI builds it.

```
â”Œâ”€ Creation Assistant â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  DM: "I need a mysterious tavern keeper who knows        â”‚
â”‚       secrets about the missing merchant"                 â”‚
â”‚                                                           â”‚
â”‚  AI: I'll create this character:                         â”‚
â”‚       Name: Jasper Holloway                               â”‚
â”‚       Archetype: Shapeshifter                             â”‚
â”‚       Description: ...                                    â”‚
â”‚       [Accept] [Modify] [Regenerate]                      â”‚
â”‚                                                           â”‚
â”‚  Type your request... [Send]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option C: Wizard/Step-by-Step
Guided flow that walks through each field with AI suggestions at each step.

```
Step 1 of 5: Character Concept
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Describe your character in a few sentences:             â”‚
â”‚  [                                                    ]   â”‚
â”‚                                                           â”‚
â”‚  Or choose a quick archetype:                            â”‚
â”‚  [Tavern Keeper] [Guard] [Merchant] [Noble] [Beggar]    â”‚
â”‚                                                           â”‚
â”‚  [Back]                                        [Next â†’]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Design Decision 3: LLM Integration Pattern

### Option A: Inline Suggestions (Recommended)
Small "suggest" buttons next to each field that fill in AI-generated content.

```
Name: [Bartender Jones    ] [ğŸª„]  â† Click to get suggestion
                            â””â”€â”€ Opens dropdown with 3 options
```

### Option B: Suggestion Panel
Dedicated panel that shows multiple AI suggestions for the current field.

```
â”Œâ”€â”€ Form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€ AI Suggestions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Name: [_____________]   â”‚ â”‚  Based on context:        â”‚
â”‚  (cursor in name field)  â”‚ â”‚  â€¢ Marcus Blackwood       â”‚
â”‚                          â”‚ â”‚  â€¢ Old Tom                â”‚
â”‚                          â”‚ â”‚  â€¢ Whisper                â”‚
â”‚                          â”‚ â”‚  [Generate More]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option C: Full Entity Generation
Generate entire entities at once with all fields populated.

```
[ğŸª„ Generate Character]
  Prompt: "A grizzled war veteran running a smithy"
  [Generate]

  â†“ Result:
  Name: Grond Steelarm
  Archetype: Mentor
  Description: A towering man with burn scars...
  Wants: Protect young adventurers, Atone for past...
  [Accept All] [Edit] [Regenerate]
```

---

## Design Decision 4: Asset Generation UI

### SELECTED: Hybrid Queue + Selection Modal

**Flow:**
1. User requests generation (e.g., "Generate 4 portrait variations")
2. Request goes to background queue - user can continue working
3. When complete, notification appears: "4 portraits ready for Jasper"
4. Clicking notification (or returning to character form) opens selection modal
5. Selected assets are added to entity's **Asset Gallery** (history preserved)
6. User can switch active asset anytime from gallery

**Key Feature: Asset Gallery per Entity**
Every entity (Character, Location, Item) maintains a gallery of all generated/uploaded assets.
This enables:
- Multiple outfits/costumes per character
- Seasonal backdrop variations
- Alternative portraits (expressions, moods)
- Easy A/B comparison of generated options

```
â”Œâ”€â”€ Generation Queue Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  ACTIVE                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â³ Jasper - Portrait (4 variations)    [â–ˆâ–ˆâ–ˆâ–‘â–‘] 60%  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  QUEUED                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â¸ Town Square - Backdrop               [Waiting]    â”‚ â”‚
â”‚  â”‚ â¸ Guard Captain - Sprite              [Waiting]    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  READY FOR SELECTION (click to choose)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ“ Bartender - Portrait (4 options)    [Select â†’]   â”‚ â”‚
â”‚  â”‚ âœ“ Forest Path - Backdrop (4 options)  [Select â†’]   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Selection Modal (appears when clicking "Select" or from notification):**
```
â”Œâ”€ Select Portrait for: Bartender Jasper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  Just Generated (batch from 2 min ago):                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚         â”‚  â”‚         â”‚  â”‚  â˜…      â”‚  â”‚         â”‚                        â”‚
â”‚  â”‚  [img]  â”‚  â”‚  [img]  â”‚  â”‚  [img]  â”‚  â”‚  [img]  â”‚                        â”‚
â”‚  â”‚         â”‚  â”‚         â”‚  â”‚ current â”‚  â”‚         â”‚                        â”‚
â”‚  â”‚ [Add]   â”‚  â”‚ [Add]   â”‚  â”‚ [Keep]  â”‚  â”‚ [Add]   â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                             â”‚
â”‚  [Add All to Gallery]  [Discard Unselected]  [Generate More Variations]    â”‚
â”‚                                                                             â”‚
â”‚  [Done]                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Asset Gallery View (within Entity Form):**
```
â”Œâ”€ Character: Bartender Jasper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  [...other fields...]                                                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Portrait Gallery â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Active:          Other Variations:                                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ â”‚
â”‚  â”‚  â”‚   â˜…      â”‚    â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚        â”‚         â”‚ â”‚
â”‚  â”‚  â”‚  [img]   â”‚    â”‚ [img]  â”‚ â”‚ [img]  â”‚ â”‚ [img]  â”‚ â”‚ [img]  â”‚         â”‚ â”‚
â”‚  â”‚  â”‚          â”‚    â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚        â”‚         â”‚ â”‚
â”‚  â”‚  â”‚ Neutral  â”‚    â”‚Suspici â”‚ â”‚Friendlyâ”‚ â”‚ Angry  â”‚ â”‚Costume2â”‚         â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â”‚
â”‚  â”‚                  [Set Active] [Delete] [Rename]                        â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  [ğŸ“ Upload New]  [ğŸ¨ Generate New]                                   â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  âš ï¸ 4 portraits pending selection (from queue)  [View â†’]              â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Proposed UI Mockups

### Creator Mode - Main View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Director Mode]  [Creator Mode]                                   [â† Back] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚  ENTITY BROWSER                 â”‚
â”‚  â”Œâ”€ Quick Create â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                 â”‚
â”‚  â”‚                                      â”‚ â”‚  [Locations]  [Characters]      â”‚
â”‚  â”‚  [+ Character] [+ Location] [+ Item] â”‚ â”‚  [Items]      [Maps]            â”‚
â”‚  â”‚  [+ Scene]     [+ Map]               â”‚ â”‚                                 â”‚
â”‚  â”‚                                      â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ Search: [____________]    â”‚  â”‚
â”‚                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€ AI Assistant â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                 â”‚
â”‚  â”‚                                      â”‚ â”‚  â–¼ Dragon's Rest Inn           â”‚
â”‚  â”‚  "Help me create..."                 â”‚ â”‚    â”œâ”€ Main Hall                 â”‚
â”‚  â”‚  [                              ]    â”‚ â”‚    â”œâ”€ Kitchen                   â”‚
â”‚  â”‚  [Ask AI]                            â”‚ â”‚    â””â”€ Cellar                    â”‚
â”‚  â”‚                                      â”‚ â”‚  â–¶ Town Square                  â”‚
â”‚  â”‚  Recent Suggestions:                 â”‚ â”‚  â–¶ Forest Path                  â”‚
â”‚  â”‚  â€¢ "A corrupt city guard who..."     â”‚ â”‚                                 â”‚
â”‚  â”‚  â€¢ "An ancient library hidden..."    â”‚ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”‚                                      â”‚ â”‚  GENERATION QUEUE               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  âœ“ Bartender Portrait    [View] â”‚
â”‚                                           â”‚  â³ Tavern Backdrop       [45%] â”‚
â”‚  â”Œâ”€ Preview / Editor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                 â”‚
â”‚  â”‚                                      â”‚ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”‚  (Selected entity details here)      â”‚ â”‚  RECENT ACTIVITY                â”‚
â”‚  â”‚                                      â”‚ â”‚  â€¢ Created "Guard Captain"      â”‚
â”‚  â”‚                                      â”‚ â”‚  â€¢ Modified "Town Square"       â”‚
â”‚  â”‚                                      â”‚ â”‚  â€¢ Generated backdrop           â”‚
â”‚  â”‚                                      â”‚ â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Character Creation Form

```
â”Œâ”€ Create Character â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Basic Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Name: [________________________] [ğŸª„ Suggest Names]                   â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Description:                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚                                                                â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                                                                â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚  [ğŸª„ Expand Description] [ğŸª„ Generate from Name]                      â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Archetype & Role â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Base Archetype: [Hero â–¼]     [ğŸª„ Suggest from Description]           â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  [Hero]      [Mentor]    [Guardian]   [Herald]                        â”‚ â”‚
â”‚  â”‚  [Shapeshifter]  [Shadow]  [Trickster]  [Ally]                        â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Wants & Motivations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  What does this character want?                                        â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Protect the village from the shadow curse         [Ã—]        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Find the truth about their missing sister         [Ã—]        â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  [+ Add Want Manually]  [ğŸª„ Generate Wants from Archetype/Description] â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Visual Assets â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Portrait:                    Sprite:                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚ â”‚
â”‚  â”‚  â”‚              â”‚             â”‚              â”‚                        â”‚ â”‚
â”‚  â”‚  â”‚   [empty]    â”‚             â”‚   [empty]    â”‚                        â”‚ â”‚
â”‚  â”‚  â”‚              â”‚             â”‚              â”‚                        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚ â”‚
â”‚  â”‚  [ğŸ“ Upload] [ğŸ¨ Generate]    [ğŸ“ Upload] [ğŸ¨ Generate]               â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  [Cancel]                                               [Save Character]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Location Creation Form

```
â”Œâ”€ Create Location â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Basic Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Name: [________________________] [ğŸª„ Suggest]                         â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Parent Location: [None â–¼]  (e.g., "Town" contains "Tavern")          â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Type: (â—) Interior  ( ) Exterior  ( ) Abstract                       â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Description:                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚                                                                â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚  [ğŸª„ Expand Description] [ğŸª„ Generate Atmospheric Details]            â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Connections â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Connected Locations:                                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚ Town Square â”€â”€[Enters]â”€â”€> [This Location]            [Ã—]         â”‚â”‚ â”‚
â”‚  â”‚  â”‚ Kitchen â”€â”€[ConnectsTo]â”€â”€> [This Location]  (bidirectional)  [Ã—]  â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚  [+ Add Connection]  [ğŸª„ Suggest Logical Connections]                 â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Visual Assets â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Backdrop:                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚                                                                â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                        [empty]                                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                                                                â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚  [ğŸ“ Upload Backdrop]  [ğŸ¨ Generate Backdrop]                         â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  [ ] Has tactical grid map                                            â”‚ â”‚
â”‚  â”‚  [ğŸ¨ Generate Tilesheet] [ğŸ“ Upload Tilesheet]                        â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  [Cancel]                                                 [Save Location]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Asset Generation Modal

```
â”Œâ”€ Generate Portrait â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  Character: Bartender Jasper                                                â”‚
â”‚                                                                             â”‚
â”‚  Workflow: [character-portrait-generation â–¼]                               â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Prompt â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  Base (from character description):                                    â”‚â”‚
â”‚  â”‚  "A weathered middle-aged man with gray streaks in his brown hair,    â”‚â”‚
â”‚  â”‚   knowing eyes, and a guarded expression"                              â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  Style modifiers: [Fantasy portrait â–¼]                                â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  Additional details:                                                   â”‚â”‚
â”‚  â”‚  [tavern lighting, medieval setting, detailed face              ]     â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  Negative prompt:                                                      â”‚â”‚
â”‚  â”‚  [blurry, low quality, modern clothing                          ]     â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  Expression variants: [âœ“] Neutral  [âœ“] Suspicious  [ ] Friendly  [ ] Angry â”‚
â”‚  (generates multiple portraits for dialogue expressions)                    â”‚
â”‚                                                                             â”‚
â”‚  [ğŸ¨ Generate 4 Variations]                                                â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚                       â”‚
â”‚  â”‚  [img]  â”‚  â”‚  [img]  â”‚  â”‚  [img]  â”‚  â”‚  [img]  â”‚                       â”‚
â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚                       â”‚
â”‚  â”‚ (â—)     â”‚  â”‚ ( )     â”‚  â”‚ ( )     â”‚  â”‚ ( )     â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                             â”‚
â”‚  [Use Style Reference...]  [Regenerate Selected]  [Generate More]          â”‚
â”‚                                                                             â”‚
â”‚  [Cancel]                                              [Use Selected]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Map/Grid Editor (Simplified)

```
â”Œâ”€ Grid Map Editor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  Map: Dragon's Rest Inn - Main Hall                                         â”‚
â”‚                                                                             â”‚
â”‚  Tilesheet: [tavern_interior.png â–¼]  [ğŸ¨ Generate New Tilesheet]           â”‚
â”‚                                                                             â”‚
â”‚  Size: [12] x [8] tiles    [Resize]                                        â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€ Tools â”€â”€â”€â”  â”Œâ”€â”€ Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  [ğŸ–Œï¸ Paint] â”‚  â”‚  â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”             â”‚  â”‚
â”‚  â”‚  [ğŸª£ Fill]  â”‚  â”‚  â”‚â–“â–“â”‚â–“â–“â”‚â–“â–“â”‚â–“â–“â”‚â–“â–“â”‚  â”‚  â”‚  â”‚â–“â–“â”‚â–“â–“â”‚â–“â–“â”‚â–“â–“â”‚  Row 0      â”‚  â”‚
â”‚  â”‚  [â¬†ï¸ Elev+] â”‚  â”‚  â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤             â”‚  â”‚
â”‚  â”‚  [â¬‡ï¸ Elev-] â”‚  â”‚  â”‚â–“â–“â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚â–“â–“â”‚  Row 1      â”‚  â”‚
â”‚  â”‚  [ğŸš« Block] â”‚  â”‚  â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤             â”‚  â”‚
â”‚  â”‚            â”‚  â”‚  â”‚â–“â–“â”‚  â”‚â–ˆâ–ˆâ”‚  â”‚  â”‚â–’â–’â”‚â–’â–’â”‚  â”‚  â”‚â–ˆâ–ˆâ”‚  â”‚â–“â–“â”‚  Row 2      â”‚  â”‚
â”‚  â”‚  â”€â”€ Tiles â”€â”‚  â”‚  â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤             â”‚  â”‚
â”‚  â”‚  [1][2][3] â”‚  â”‚  â”‚â–“â–“â”‚  â”‚  â”‚  â”‚  â”‚â–’â–’â”‚â–’â–’â”‚  â”‚  â”‚  â”‚  â”‚â–“â–“â”‚  Row 3      â”‚  â”‚
â”‚  â”‚  [4][5][6] â”‚  â”‚  â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜             â”‚  â”‚
â”‚  â”‚  [7][8][9] â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚            â”‚  â”‚  Legend: â–“â–“=Wall  â–ˆâ–ˆ=Table  â–’â–’=Bar Counter           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  Elevation layer: [Show â–¼]    Passability: [Show â–¼]                        â”‚
â”‚                                                                             â”‚
â”‚  [Cancel]                                                    [Save Map]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ComfyUI Workflow Templates

Define template names that will be referenced (actual .json workflows supplied manually):

### Core Workflows
| Workflow Name | Purpose | Default Size | Notes |
|---------------|---------|--------------|-------|
| `character-portrait-generation` | NPC/PC face portraits | 256Ã—256 | Supports expression variants |
| `character-sprite-generation` | Full-body sprites | 512Ã—512 | Transparent background |
| `backdrop-generation` | Scene backgrounds | 1920Ã—1080 | Visual novel style |
| `tilesheet-generation` | Grid map tiles | 512Ã—512 (32Ã—32 tiles) | Consistent tile style |
| `item-icon-generation` | Inventory item icons | 64Ã—64 | Transparent background |

### Extended Workflows (All Variants)
| Workflow Name | Purpose | Default Size | Notes |
|---------------|---------|--------------|-------|
| `portrait-expression-variant` | Same character, different expression | 256Ã—256 | Uses style reference from existing portrait |
| `character-emotion-sheet` | Grid of 6-9 expressions | 768Ã—768 | Single image with expression grid |
| `map-region-backdrop` | Backdrop for clickable map region | 1280Ã—720 | Smaller than full backdrop |
| `item-set-generation` | 4-6 themed items at once | 256Ã—256 grid | e.g., "potion set", "weapon set" |
| `costume-variant` | Same character, different outfit | 512Ã—512 | Uses style reference from base sprite |
| `location-time-variant` | Same location, different time/weather | 1920Ã—1080 | Day/night/rain variants |

---

## Asset Gallery Data Model

Each entity maintains a gallery of assets with history:

```rust
/// Asset stored in an entity's gallery
struct GalleryAsset {
    id: AssetId,
    entity_id: EntityId,         // Character, Location, or Item
    asset_type: AssetType,       // Portrait, Sprite, Backdrop, etc.
    file_path: String,           // Path to stored asset
    is_active: bool,             // Currently selected for this slot
    label: Option<String>,       // User-defined label ("Angry", "Winter Outfit")
    generation_metadata: Option<GenerationMetadata>,
    created_at: DateTime<Utc>,
}

enum AssetType {
    Portrait,
    Sprite,
    Backdrop,
    Tilesheet,
    ItemIcon,
    EmotionSheet,
    RegionBackdrop,
}

/// Metadata about how the asset was generated
struct GenerationMetadata {
    workflow: String,            // e.g., "character-portrait-generation"
    prompt: String,
    negative_prompt: Option<String>,
    seed: i64,
    style_reference: Option<AssetId>,  // If using another asset as reference
    batch_id: BatchId,           // Group assets generated together
}

/// A batch of assets generated together
struct GenerationBatch {
    id: BatchId,
    entity_id: EntityId,
    asset_type: AssetType,
    status: BatchStatus,
    requested_at: DateTime<Utc>,
    completed_at: Option<DateTime<Utc>>,
    assets: Vec<AssetId>,        // Generated assets (populated when complete)
}

enum BatchStatus {
    Queued,
    Generating { progress: u8 },  // 0-100
    ReadyForSelection,           // Complete, awaiting user choice
    Completed,                   // User has made selection
    Failed { error: String },
}
```

### Neo4j Schema Additions

```cypher
// New nodes
(:GalleryAsset {id, entity_id, asset_type, file_path, is_active, label, created_at})
(:GenerationBatch {id, entity_id, asset_type, status, requested_at, completed_at})

// New relationships
(:Character)-[:HAS_ASSET]->(:GalleryAsset)
(:Location)-[:HAS_ASSET]->(:GalleryAsset)
(:Item)-[:HAS_ASSET]->(:GalleryAsset)
(:GalleryAsset)-[:GENERATED_WITH]->(:GenerationMetadata)
(:GalleryAsset)-[:PART_OF_BATCH]->(:GenerationBatch)
(:GalleryAsset)-[:STYLE_REFERENCE]->(:GalleryAsset)
```

### REST API Additions (Engine)

```
POST   /api/assets/generate                    # Queue new generation
GET    /api/assets/queue                       # List generation queue
GET    /api/assets/batch/{batch_id}            # Get batch status
POST   /api/assets/batch/{batch_id}/select     # Select from completed batch

GET    /api/characters/{id}/gallery            # List all assets for character
POST   /api/characters/{id}/gallery            # Upload asset to gallery
PUT    /api/characters/{id}/gallery/{asset_id}/activate  # Set as active
DELETE /api/characters/{id}/gallery/{asset_id} # Remove from gallery

# Same pattern for locations and items
GET    /api/locations/{id}/gallery
GET    /api/items/{id}/gallery
```

---

## LLM Suggestion Prompts

Templates for requesting LLM suggestions:

### Character Name Suggestions
```
Given this character concept: "{description}"
Archetype: {archetype}
Setting: {world_description}

Suggest 5 fitting names for this character. Consider:
- Cultural context of the setting
- Character's role and archetype
- Memorability and pronounceability

Format: Return as JSON array of names.
```

### Character Description Expansion
```
Expand this character description into a rich narrative:
Current: "{brief_description}"
Name: {name}
Archetype: {archetype}

Include:
- Physical appearance (age, build, distinguishing features)
- Mannerisms and speech patterns
- Hints at backstory
- How they present themselves to others

Keep to 2-3 paragraphs.
```

### Wants Generation
```
Generate motivations for this character:
Name: {name}
Archetype: {archetype}
Description: {description}

Suggest 2-3 "Wants" (actantial goals) that:
- Fit their archetype
- Create potential conflict or story hooks
- Include at least one secret want (unknown to players)

Format: JSON array with {description, target, intensity, known_to_player}
```

### Location Description
```
Create an atmospheric description for this location:
Name: {name}
Type: {interior/exterior/abstract}
Parent: {parent_location or "standalone"}
World: {world_description}

Include:
- Sensory details (sight, sound, smell)
- Atmosphere and mood
- Notable features
- Hints at what activities happen here

Keep to 2-3 paragraphs.
```

### Connection Suggestions
```
Suggest logical connections for this location:
Location: {name} ({type})
Parent: {parent_location}
Existing locations in world: {location_list}

What other locations would naturally connect to this one?
Consider: entrances, exits, adjacent areas, paths leading to/from.

Format: JSON array of {to_location, connection_type, description}
```

---

## Implementation Components

### New Presentation Components (Player)

```
Player/src/presentation/
â”œâ”€â”€ views/
â”‚   â””â”€â”€ dm_view.rs          # Add tab switching to Creator mode
â”œâ”€â”€ components/
â”‚   â””â”€â”€ creator/            # NEW
â”‚       â”œâ”€â”€ mod.rs
â”‚       â”œâ”€â”€ entity_browser.rs       # Tree view of world entities
â”‚       â”œâ”€â”€ character_form.rs       # Character creation/editing
â”‚       â”œâ”€â”€ location_form.rs        # Location creation/editing
â”‚       â”œâ”€â”€ item_form.rs            # Item creation/editing
â”‚       â”œâ”€â”€ map_editor.rs           # Grid map painting
â”‚       â”œâ”€â”€ generation_modal.rs     # ComfyUI generation UI
â”‚       â”œâ”€â”€ generation_queue.rs     # Background generation tracking
â”‚       â”œâ”€â”€ suggestion_button.rs    # Reusable LLM suggest button
â”‚       â””â”€â”€ ai_assistant_panel.rs   # Freeform AI chat for creation
```

### New Application Services (Player)

```
Player/src/application/services/
â”œâ”€â”€ creation_service.rs     # Orchestrates entity creation
â”œâ”€â”€ generation_service.rs   # Manages ComfyUI requests
â””â”€â”€ suggestion_service.rs   # Handles LLM suggestions
```

### Engine Additions

```
Engine/src/infrastructure/
â”œâ”€â”€ http/
â”‚   â””â”€â”€ generation_routes.rs   # NEW: REST endpoints for generation
â””â”€â”€ comfyui.rs                 # Extend with workflow loading
```

---

## Design Decisions Summary

### Confirmed Choices

| Decision | Choice | Rationale |
|----------|--------|-----------|
| **UI Structure** | Tabbed View | `[Director Mode] [Creator Mode]` tabs within DM view |
| **Creation Flow** | Form-Based | Standard forms with inline `[ğŸª„ Suggest]` buttons |
| **LLM Integration** | Inline Suggestions | Small suggest buttons next to each field |
| **Asset Generation** | Hybrid Queue + Selection | Background queue, modal selection when ready |
| **Asset Management** | Gallery per Entity | History preserved, multiple variants, switchable active asset |
| **Workflows** | Full Set | Core + expression sheets, region backdrops, item sets, costume/time variants |

### Key Features

1. **Background Generation Queue**
   - Assets generate in background, user continues working
   - Notifications when batches complete
   - Selection modal or return to entity form to choose

2. **Asset Gallery per Entity**
   - All generated/uploaded assets preserved
   - Label assets (e.g., "Angry", "Winter Outfit", "Night")
   - Switch active asset anytime
   - Use existing assets as style references

3. **LLM-Assisted Creation**
   - Inline suggest buttons for names, descriptions, motivations
   - Generate entire want lists from archetype
   - Suggest logical location connections

4. **Workflow Templates**
   - 11 ComfyUI workflow templates covering all asset types
   - Style reference support for consistent character looks
   - Batch generation (4 variations) with selection flow

---

## Implementation Phases

### Phase 11A: Asset Gallery Foundation (Engine) âœ… COMPLETE
**Priority: High** - Required for all other features

- [x] Add `GalleryAsset` and `GenerationBatch` domain entities
- [x] Create `AssetGalleryRepository` for Neo4j persistence
- [x] REST endpoints: `/api/characters/{id}/gallery`, etc.
- [x] Migrate existing `sprite_asset`/`portrait_asset` to gallery model
- [x] Asset file storage in `asset_manager`

### Phase 11B: Generation Queue System (Engine) âœ… COMPLETE
**Priority: High** - Enables background generation

- [x] Create `GenerationQueueService` for managing batches
- [x] Extend `ComfyUIClient` with workflow template loading
- [x] Background task runner for processing queue
- [x] WebSocket events for generation progress/completion
- [x] REST endpoints: `/api/assets/generate`, `/api/assets/queue`

### Phase 11C: Creator Mode UI (Player) ğŸ”„ IN PROGRESS
**Priority: High** - Main user-facing feature

- [x] Add tabbed navigation to `dm_view.rs` (Director/Creator/Settings)
- [x] Create `EntityBrowser` component (tree view) - UI done, **needs API integration**
- [x] Create `CharacterForm` component with all fields - UI done, **needs API integration**
- [x] Create `LocationForm` component with connections - UI done, **needs API integration**
- [ ] Create `ItemForm` component
- [x] Create `AssetGallery` component - UI done, **needs API integration**

### Phase 11D: Generation UI (Player) ğŸ”„ IN PROGRESS
**Priority: Medium** - Asset generation interface

- [x] Create `GenerationQueuePanel` component
- [ ] Create `GenerationRequestModal` (configure generation)
- [ ] Create `AssetSelectionModal` (pick from variations)
- [x] WebSocket integration for real-time queue updates (GenerationState)
- [ ] Toast notifications for completed batches

### Phase 11E: LLM Suggestion Integration (Player + Engine) ğŸ”„ IN PROGRESS
**Priority: Medium** - AI-assisted creation

- [x] Create `SuggestionButton` reusable component - UI done, **needs API integration**
- [x] Add suggestion endpoints to Engine: `/api/suggest/character-name`, etc.
- [x] Implement prompt templates for each suggestion type
- [ ] Dropdown UI for selecting from multiple suggestions

### Phase 11F: Map Editor (Player)
**Priority: Lower** - Grid map creation

- [ ] Create `GridMapEditor` component
- [ ] Tile painting with tilesheet selection
- [ ] Elevation layer editing
- [ ] Passability/cover value editing
- [ ] Generate tilesheet from prompt

---

## File Structure (New/Modified)

### Engine Additions
```
Engine/src/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ gallery_asset.rs      # NEW
â”‚   â”‚   â””â”€â”€ generation_batch.rs   # NEW
â”‚   â””â”€â”€ value_objects/
â”‚       â””â”€â”€ ids.rs                # Add AssetId, BatchId
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ generation_service.rs # NEW
â”‚   â”‚   â””â”€â”€ suggestion_service.rs # NEW
â”‚   â””â”€â”€ dto/
â”‚       â””â”€â”€ generation_dto.rs     # NEW
â””â”€â”€ infrastructure/
    â”œâ”€â”€ persistence/
    â”‚   â””â”€â”€ asset_repository.rs   # NEW
    â”œâ”€â”€ http/
    â”‚   â”œâ”€â”€ asset_routes.rs       # NEW
    â”‚   â””â”€â”€ suggestion_routes.rs  # NEW
    â””â”€â”€ comfyui.rs                # Extend with workflow loading
```

### Player Additions
```
Player/src/
â”œâ”€â”€ presentation/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â””â”€â”€ dm_view.rs            # Add tabbed navigation
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ creator/              # NEW directory
â”‚           â”œâ”€â”€ mod.rs
â”‚           â”œâ”€â”€ entity_browser.rs
â”‚           â”œâ”€â”€ character_form.rs
â”‚           â”œâ”€â”€ location_form.rs
â”‚           â”œâ”€â”€ item_form.rs
â”‚           â”œâ”€â”€ asset_gallery.rs
â”‚           â”œâ”€â”€ generation_queue.rs
â”‚           â”œâ”€â”€ generation_modal.rs
â”‚           â”œâ”€â”€ selection_modal.rs
â”‚           â”œâ”€â”€ suggestion_button.rs
â”‚           â””â”€â”€ map_editor.rs
â”œâ”€â”€ application/
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ generation_service.rs # NEW
â”‚       â””â”€â”€ creation_service.rs   # NEW
â””â”€â”€ infrastructure/
    â””â”€â”€ websocket/
        â””â”€â”€ messages.rs           # Add generation events
```

---

## WebSocket Events (New)

```rust
// Engine â†’ Player (generation updates)
enum GenerationEvent {
    BatchQueued { batch_id: BatchId, position: u32 },
    BatchProgress { batch_id: BatchId, progress: u8 },
    BatchComplete { batch_id: BatchId, asset_count: u32 },
    BatchFailed { batch_id: BatchId, error: String },
}

// Player â†’ Engine (generation requests)
enum GenerationRequest {
    QueueGeneration {
        entity_id: EntityId,
        asset_type: AssetType,
        workflow: String,
        prompt: String,
        count: u8,  // Number of variations
    },
    SelectFromBatch {
        batch_id: BatchId,
        selected_assets: Vec<AssetId>,
        discard_others: bool,
    },
    CancelBatch { batch_id: BatchId },
}
